{"ast":null,"code":"import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../documents.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nconst _c0 = function (a0) {\n  return {\n    width: a0\n  };\n};\n\nfunction DocumentAddComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r1.uploadProgress + \"%\"));\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r1.uploadProgress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.uploadProgress, \"% \");\n  }\n}\n\nfunction DocumentAddComponent_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function DocumentAddComponent_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onCancelUpload();\n    });\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DocumentAddComponent_ul_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 16);\n    i0.ɵɵelementStart(1, \"li\", 17);\n    i0.ɵɵelementStart(2, \"a\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const file_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", file_r6.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(file_r6.name);\n  }\n}\n\nexport class DocumentAddComponent {\n  constructor(http, documentsService, router, route) {\n    this.http = http;\n    this.documentsService = documentsService;\n    this.router = router;\n    this.route = route;\n    this.statusMessage = \"\";\n    this.fileName = \"\"; // files: FileList | null = null;\n\n    this.uploadSub = new Subscription();\n  }\n\n  ngOnInit() {\n    this.fileInfos = this.documentsService.getFiles();\n  }\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n  }\n\n  upload() {\n    this.uploadProgress = 0;\n\n    if (this.selectedFiles) {\n      const file = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n        this.documentsService.uploadFile(this.currentFile).subscribe(event => {\n          if (event.type === HttpEventType.UploadProgress) {\n            this.uploadProgress = Math.round(100 * event.loaded / event.total);\n          } else if (event instanceof HttpResponse) {\n            this.statusMessage = event.body.message;\n            this.fileInfos = this.documentsService.getFiles();\n          }\n        }, err => {\n          console.log(err);\n          this.uploadProgress = 0;\n\n          if (err.error && err.error.message) {\n            this.statusMessage = err.error.message;\n          } else {\n            this.statusMessage = 'Could not upload the file!';\n          }\n\n          this.currentFile = undefined;\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n\n  onCancelUpload() {\n    this.uploadSub.unsubscribe();\n    this.reset();\n  }\n\n  onCancel() {\n    this.router.navigate(['../'], {\n      relativeTo: this.route\n    });\n  }\n\n  reset() {\n    this.uploadProgress = 0;\n    this.uploadSub.unsubscribe();\n  }\n\n  ngOnDestroy() {\n    console.log(\"ARE YOU DESTROYING ME????????????\");\n  }\n\n}\n\nDocumentAddComponent.ɵfac = function DocumentAddComponent_Factory(t) {\n  return new (t || DocumentAddComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.DocumentService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nDocumentAddComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DocumentAddComponent,\n  selectors: [[\"app-document-add\"]],\n  decls: 24,\n  vars: 7,\n  consts: [[1, \"form-group\"], [1, \"col-xs-12\"], [1, \"row\"], [\"type\", \"file\", \"id\", \"file\", \"name\", \"document\", 1, \"form-control\", 2, \"display\", \"none\", 3, \"change\"], [\"uploadDoc\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"row\", 2, \"margin-top\", \"20px\", \"margin-bottom\", \"20px\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", \"progress-bar-striped\", 3, \"ngStyle\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]],\n  template: function DocumentAddComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r7 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵelementStart(4, \"h4\");\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"input\", 3, 4);\n      i0.ɵɵlistener(\"change\", function DocumentAddComponent_Template_input_change_6_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function DocumentAddComponent_Template_button_click_8_listener() {\n        i0.ɵɵrestoreView(_r7);\n\n        const _r0 = i0.ɵɵreference(7);\n\n        return _r0.click();\n      });\n      i0.ɵɵtext(9, \"Select Document\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 6);\n      i0.ɵɵelementStart(11, \"div\", 1);\n      i0.ɵɵtemplate(12, DocumentAddComponent_div_12_Template, 3, 5, \"div\", 7);\n      i0.ɵɵtemplate(13, DocumentAddComponent_button_13_Template, 2, 0, \"button\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 2);\n      i0.ɵɵelementStart(15, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function DocumentAddComponent_Template_button_click_15_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵtext(16, \"Upload Document\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function DocumentAddComponent_Template_button_click_17_listener() {\n        return ctx.onCancel();\n      });\n      i0.ɵɵtext(18, \"Back\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 11);\n      i0.ɵɵelementStart(20, \"div\", 12);\n      i0.ɵɵtext(21, \"List of Files\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(22, DocumentAddComponent_ul_22_Template, 4, 2, \"ul\", 13);\n      i0.ɵɵpipe(23, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.statusMessage);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentFile);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.uploadProgress > 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(23, 5, ctx.fileInfos));\n    }\n  },\n  directives: [i4.NgIf, i4.NgForOf, i4.NgStyle],\n  pipes: [i4.AsyncPipe],\n  styles: [\".file-upload[_ngcontent-%COMP%] {\\r\\n    display:none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3VtZW50LWFkZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtBQUNoQiIsImZpbGUiOiJkb2N1bWVudC1hZGQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5maWxlLXVwbG9hZCB7XHJcbiAgICBkaXNwbGF5Om5vbmU7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/glherault/source/repos/DocumentManager/DocumentManager/ClientApp/src/app/documents/document-add/document-add.component.ts"],"names":["HttpEventType","HttpResponse","Subscription","i0","i1","i2","i3","i4","_c0","a0","width","DocumentAddComponent_div_12_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","uploadProgress","ɵɵattribute","ɵɵtextInterpolate1","DocumentAddComponent_button_13_Template","_r5","ɵɵgetCurrentView","ɵɵlistener","DocumentAddComponent_button_13_Template_button_click_0_listener","ɵɵrestoreView","ctx_r4","onCancelUpload","DocumentAddComponent_ul_22_Template","file_r6","$implicit","ɵɵpropertyInterpolate","url","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","DocumentAddComponent","constructor","http","documentsService","router","route","statusMessage","fileName","uploadSub","ngOnInit","fileInfos","getFiles","selectFile","event","selectedFiles","target","files","upload","file","item","currentFile","uploadFile","subscribe","type","UploadProgress","Math","round","loaded","total","body","message","err","console","log","error","undefined","unsubscribe","reset","onCancel","navigate","relativeTo","ngOnDestroy","ɵfac","DocumentAddComponent_Factory","t","ɵɵdirectiveInject","HttpClient","DocumentService","Router","ActivatedRoute","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","DocumentAddComponent_Template","_r7","DocumentAddComponent_Template_input_change_6_listener","$event","DocumentAddComponent_Template_button_click_8_listener","_r0","ɵɵreference","click","ɵɵtemplate","DocumentAddComponent_Template_button_click_15_listener","DocumentAddComponent_Template_button_click_17_listener","ɵɵpipe","ɵɵpipeBind1","directives","NgIf","NgForOf","NgStyle","pipes","AsyncPipe","styles"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,YAAxB,QAA4C,sBAA5C;AACA,SAASC,YAAT,QAA6B,MAA7B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;;AACA,MAAMC,GAAG,GAAG,UAAUC,EAAV,EAAc;AAAE,SAAO;AAAEC,IAAAA,KAAK,EAAED;AAAT,GAAP;AAAuB,CAAnD;;AACA,SAASE,oCAAT,CAA8CC,EAA9C,EAAkDC,GAAlD,EAAuD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACjET,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B;AACAX,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMK,MAAM,GAAGd,EAAE,CAACe,aAAH,EAAf;AACAf,IAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,IAAAA,EAAE,CAACiB,UAAH,CAAc,SAAd,EAAyBjB,EAAE,CAACkB,eAAH,CAAmB,CAAnB,EAAsBb,GAAtB,EAA2BS,MAAM,CAACK,cAAP,GAAwB,GAAnD,CAAzB;AACAnB,IAAAA,EAAE,CAACoB,WAAH,CAAe,eAAf,EAAgCN,MAAM,CAACK,cAAvC;AACAnB,IAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,IAAAA,EAAE,CAACqB,kBAAH,CAAsB,GAAtB,EAA2BP,MAAM,CAACK,cAAlC,EAAkD,IAAlD;AACH;AAAE;;AACH,SAASG,uCAAT,CAAiDb,EAAjD,EAAqDC,GAArD,EAA0D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACpE,UAAMc,GAAG,GAAGvB,EAAE,CAACwB,gBAAH,EAAZ;;AACAxB,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,EAA/B;AACAX,IAAAA,EAAE,CAACyB,UAAH,CAAc,OAAd,EAAuB,SAASC,+DAAT,GAA2E;AAAE1B,MAAAA,EAAE,CAAC2B,aAAH,CAAiBJ,GAAjB;AAAuB,YAAMK,MAAM,GAAG5B,EAAE,CAACe,aAAH,EAAf;AAAmC,aAAOa,MAAM,CAACC,cAAP,EAAP;AAAiC,KAA/L;AACA7B,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,QAAb;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACH;AAAE;;AACH,SAASiB,mCAAT,CAA6CrB,EAA7C,EAAiDC,GAAjD,EAAsD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAChET,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,EAA3B;AACAX,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,EAA3B;AACAX,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,GAArB,EAA0B,EAA1B;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMsB,OAAO,GAAGrB,GAAG,CAACsB,SAApB;AACAhC,IAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,IAAAA,EAAE,CAACiC,qBAAH,CAAyB,MAAzB,EAAiCF,OAAO,CAACG,GAAzC,EAA8ClC,EAAE,CAACmC,aAAjD;AACAnC,IAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,IAAAA,EAAE,CAACoC,iBAAH,CAAqBL,OAAO,CAACM,IAA7B;AACH;AAAE;;AACH,OAAO,MAAMC,oBAAN,CAA2B;AAC9BC,EAAAA,WAAW,CAACC,IAAD,EAAOC,gBAAP,EAAyBC,MAAzB,EAAiCC,KAAjC,EAAwC;AAC/C,SAAKH,IAAL,GAAYA,IAAZ;AACA,SAAKC,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,QAAL,GAAgB,EAAhB,CAN+C,CAO/C;;AACA,SAAKC,SAAL,GAAiB,IAAI/C,YAAJ,EAAjB;AACH;;AACDgD,EAAAA,QAAQ,GAAG;AACP,SAAKC,SAAL,GAAiB,KAAKP,gBAAL,CAAsBQ,QAAtB,EAAjB;AACH;;AACDC,EAAAA,UAAU,CAACC,KAAD,EAAQ;AACd,SAAKC,aAAL,GAAqBD,KAAK,CAACE,MAAN,CAAaC,KAAlC;AACH;;AACDC,EAAAA,MAAM,GAAG;AACL,SAAKpC,cAAL,GAAsB,CAAtB;;AACA,QAAI,KAAKiC,aAAT,EAAwB;AACpB,YAAMI,IAAI,GAAG,KAAKJ,aAAL,CAAmBK,IAAnB,CAAwB,CAAxB,CAAb;;AACA,UAAID,IAAJ,EAAU;AACN,aAAKE,WAAL,GAAmBF,IAAnB;AACA,aAAKf,gBAAL,CAAsBkB,UAAtB,CAAiC,KAAKD,WAAtC,EAAmDE,SAAnD,CAA8DT,KAAD,IAAW;AACpE,cAAIA,KAAK,CAACU,IAAN,KAAehE,aAAa,CAACiE,cAAjC,EAAiD;AAC7C,iBAAK3C,cAAL,GAAsB4C,IAAI,CAACC,KAAL,CAAW,MAAMb,KAAK,CAACc,MAAZ,GAAqBd,KAAK,CAACe,KAAtC,CAAtB;AACH,WAFD,MAGK,IAAIf,KAAK,YAAYrD,YAArB,EAAmC;AACpC,iBAAK8C,aAAL,GAAqBO,KAAK,CAACgB,IAAN,CAAWC,OAAhC;AACA,iBAAKpB,SAAL,GAAiB,KAAKP,gBAAL,CAAsBQ,QAAtB,EAAjB;AACH;AACJ,SARD,EAQIoB,GAAD,IAAS;AACRC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,eAAKlD,cAAL,GAAsB,CAAtB;;AACA,cAAIkD,GAAG,CAACG,KAAJ,IAAaH,GAAG,CAACG,KAAJ,CAAUJ,OAA3B,EAAoC;AAChC,iBAAKxB,aAAL,GAAqByB,GAAG,CAACG,KAAJ,CAAUJ,OAA/B;AACH,WAFD,MAGK;AACD,iBAAKxB,aAAL,GAAqB,4BAArB;AACH;;AACD,eAAKc,WAAL,GAAmBe,SAAnB;AACH,SAlBD;AAmBH;;AACD,WAAKrB,aAAL,GAAqBqB,SAArB;AACH;AACJ;;AACD5C,EAAAA,cAAc,GAAG;AACb,SAAKiB,SAAL,CAAe4B,WAAf;AACA,SAAKC,KAAL;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,SAAKlC,MAAL,CAAYmC,QAAZ,CAAqB,CAAC,KAAD,CAArB,EAA8B;AAAEC,MAAAA,UAAU,EAAE,KAAKnC;AAAnB,KAA9B;AACH;;AACDgC,EAAAA,KAAK,GAAG;AACJ,SAAKxD,cAAL,GAAsB,CAAtB;AACA,SAAK2B,SAAL,CAAe4B,WAAf;AACH;;AACDK,EAAAA,WAAW,GAAG;AACVT,IAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACH;;AA3D6B;;AA6DlCjC,oBAAoB,CAAC0C,IAArB,GAA4B,SAASC,4BAAT,CAAsCC,CAAtC,EAAyC;AAAE,SAAO,KAAKA,CAAC,IAAI5C,oBAAV,EAAgCtC,EAAE,CAACmF,iBAAH,CAAqBlF,EAAE,CAACmF,UAAxB,CAAhC,EAAqEpF,EAAE,CAACmF,iBAAH,CAAqBjF,EAAE,CAACmF,eAAxB,CAArE,EAA+GrF,EAAE,CAACmF,iBAAH,CAAqBhF,EAAE,CAACmF,MAAxB,CAA/G,EAAgJtF,EAAE,CAACmF,iBAAH,CAAqBhF,EAAE,CAACoF,cAAxB,CAAhJ,CAAP;AAAkM,CAAzQ;;AACAjD,oBAAoB,CAACkD,IAArB,GAA4B,aAAcxF,EAAE,CAACyF,iBAAH,CAAqB;AAAE5B,EAAAA,IAAI,EAAEvB,oBAAR;AAA8BoD,EAAAA,SAAS,EAAE,CAAC,CAAC,kBAAD,CAAD,CAAzC;AAAiEC,EAAAA,KAAK,EAAE,EAAxE;AAA4EC,EAAAA,IAAI,EAAE,CAAlF;AAAqFC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,YAAJ,CAAD,EAAoB,CAAC,CAAD,EAAI,WAAJ,CAApB,EAAsC,CAAC,CAAD,EAAI,KAAJ,CAAtC,EAAkD,CAAC,MAAD,EAAS,MAAT,EAAiB,IAAjB,EAAuB,MAAvB,EAA+B,MAA/B,EAAuC,UAAvC,EAAmD,CAAnD,EAAsD,cAAtD,EAAsE,CAAtE,EAAyE,SAAzE,EAAoF,MAApF,EAA4F,CAA5F,EAA+F,QAA/F,CAAlD,EAA4J,CAAC,WAAD,EAAc,EAAd,CAA5J,EAA+K,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,KAAtB,EAA6B,aAA7B,EAA4C,CAA5C,EAA+C,OAA/C,CAA/K,EAAwO,CAAC,CAAD,EAAI,KAAJ,EAAW,CAAX,EAAc,YAAd,EAA4B,MAA5B,EAAoC,eAApC,EAAqD,MAArD,CAAxO,EAAsS,CAAC,OAAD,EAAU,eAAV,EAA2B,CAA3B,EAA8B,MAA9B,CAAtS,EAA6U,CAAC,MAAD,EAAS,QAAT,EAAmB,OAAnB,EAA4B,gBAA5B,EAA8C,CAA9C,EAAiD,OAAjD,EAA0D,CAA1D,EAA6D,MAA7D,CAA7U,EAAmZ,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,KAAtB,EAA6B,aAA7B,EAA4C,CAA5C,EAA+C,UAA/C,EAA2D,OAA3D,CAAnZ,EAAwd,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,KAAtB,EAA6B,YAA7B,EAA2C,CAA3C,EAA8C,OAA9C,CAAxd,EAAghB,CAAC,CAAD,EAAI,MAAJ,EAAY,MAAZ,CAAhhB,EAAqiB,CAAC,CAAD,EAAI,aAAJ,CAAriB,EAAyjB,CAAC,OAAD,EAAU,6BAAV,EAAyC,CAAzC,EAA4C,OAA5C,EAAqD,SAArD,CAAzjB,EAA0nB,CAAC,CAAD,EAAI,UAAJ,EAAgB,MAAhB,CAA1nB,EAAmpB,CAAC,MAAD,EAAS,aAAT,EAAwB,eAAxB,EAAyC,GAAzC,EAA8C,eAA9C,EAA+D,KAA/D,EAAsE,CAAtE,EAAyE,cAAzE,EAAyF,mBAAzF,EAA8G,sBAA9G,EAAsI,CAAtI,EAAyI,SAAzI,CAAnpB,EAAwyB,CAAC,CAAD,EAAI,YAAJ,EAAkB,kBAAlB,CAAxyB,EAA+0B,CAAC,CAAD,EAAI,iBAAJ,CAA/0B,EAAu2B,CAAC,CAAD,EAAI,MAAJ,CAAv2B,CAA7F;AAAk9BC,EAAAA,QAAQ,EAAE,SAASC,6BAAT,CAAuCtF,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACjlC,YAAMuF,GAAG,GAAGhG,EAAE,CAACwB,gBAAH,EAAZ;;AACAxB,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B,EAAiC,CAAjC;AACAX,MAAAA,EAAE,CAACyB,UAAH,CAAc,QAAd,EAAwB,SAASwE,qDAAT,CAA+DC,MAA/D,EAAuE;AAAE,eAAOxF,GAAG,CAACwC,UAAJ,CAAegD,MAAf,CAAP;AAAgC,OAAjI;AACAlG,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,CAA/B;AACAX,MAAAA,EAAE,CAACyB,UAAH,CAAc,OAAd,EAAuB,SAAS0E,qDAAT,GAAiE;AAAEnG,QAAAA,EAAE,CAAC2B,aAAH,CAAiBqE,GAAjB;;AAAuB,cAAMI,GAAG,GAAGpG,EAAE,CAACqG,WAAH,CAAe,CAAf,CAAZ;;AAA+B,eAAOD,GAAG,CAACE,KAAJ,EAAP;AAAqB,OAArK;AACAtG,MAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,iBAAb;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,CAA7B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,CAA7B;AACAX,MAAAA,EAAE,CAACuG,UAAH,CAAc,EAAd,EAAkB/F,oCAAlB,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,KAA9D,EAAqE,CAArE;AACAR,MAAAA,EAAE,CAACuG,UAAH,CAAc,EAAd,EAAkBjF,uCAAlB,EAA2D,CAA3D,EAA8D,CAA9D,EAAiE,QAAjE,EAA2E,CAA3E;AACAtB,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,CAA7B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,CAAhC;AACAX,MAAAA,EAAE,CAACyB,UAAH,CAAc,OAAd,EAAuB,SAAS+E,sDAAT,GAAkE;AAAE,eAAO9F,GAAG,CAAC6C,MAAJ,EAAP;AAAsB,OAAjH;AACAvD,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,iBAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,QAAtB,EAAgC,EAAhC;AACAX,MAAAA,EAAE,CAACyB,UAAH,CAAc,OAAd,EAAuB,SAASgF,sDAAT,GAAkE;AAAE,eAAO/F,GAAG,CAACkE,QAAJ,EAAP;AAAwB,OAAnH;AACA5E,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,MAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,EAA7B;AACAX,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,EAA7B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,eAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACuG,UAAH,CAAc,EAAd,EAAkBzE,mCAAlB,EAAuD,CAAvD,EAA0D,CAA1D,EAA6D,IAA7D,EAAmE,EAAnE;AACA9B,MAAAA,EAAE,CAAC0G,MAAH,CAAU,EAAV,EAAc,OAAd;AACA1G,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,QAAIJ,EAAE,GAAG,CAAT,EAAY;AACVT,MAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,MAAAA,EAAE,CAACoC,iBAAH,CAAqB1B,GAAG,CAACkC,aAAzB;AACA5C,MAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,MAAAA,EAAE,CAACiB,UAAH,CAAc,MAAd,EAAsBP,GAAG,CAACgD,WAA1B;AACA1D,MAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,MAAAA,EAAE,CAACiB,UAAH,CAAc,MAAd,EAAsBP,GAAG,CAACS,cAAJ,GAAqB,CAA3C;AACAnB,MAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,MAAAA,EAAE,CAACiB,UAAH,CAAc,UAAd,EAA0B,CAACP,GAAG,CAAC0C,aAA/B;AACApD,MAAAA,EAAE,CAACgB,SAAH,CAAa,CAAb;AACAhB,MAAAA,EAAE,CAACiB,UAAH,CAAc,SAAd,EAAyBjB,EAAE,CAAC2G,WAAH,CAAe,EAAf,EAAmB,CAAnB,EAAsBjG,GAAG,CAACsC,SAA1B,CAAzB;AACH;AAAE,GAtDwD;AAsDtD4D,EAAAA,UAAU,EAAE,CAACxG,EAAE,CAACyG,IAAJ,EAAUzG,EAAE,CAAC0G,OAAb,EAAsB1G,EAAE,CAAC2G,OAAzB,CAtD0C;AAsDPC,EAAAA,KAAK,EAAE,CAAC5G,EAAE,CAAC6G,SAAJ,CAtDA;AAsDgBC,EAAAA,MAAM,EAAE,CAAC,4XAAD;AAtDxB,CAArB,CAA1C","sourcesContent":["import { HttpEventType, HttpResponse } from '@angular/common/http';\r\nimport { Subscription } from 'rxjs';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nimport * as i2 from \"../documents.service\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/common\";\r\nconst _c0 = function (a0) { return { width: a0 }; };\r\nfunction DocumentAddComponent_div_12_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 14);\r\n    i0.ɵɵelementStart(1, \"div\", 15);\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r1.uploadProgress + \"%\"));\r\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r1.uploadProgress);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.uploadProgress, \"% \");\r\n} }\r\nfunction DocumentAddComponent_button_13_Template(rf, ctx) { if (rf & 1) {\r\n    const _r5 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"button\", 10);\r\n    i0.ɵɵlistener(\"click\", function DocumentAddComponent_button_13_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r5); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.onCancelUpload(); });\r\n    i0.ɵɵtext(1, \"Cancel\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction DocumentAddComponent_ul_22_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"ul\", 16);\r\n    i0.ɵɵelementStart(1, \"li\", 17);\r\n    i0.ɵɵelementStart(2, \"a\", 18);\r\n    i0.ɵɵtext(3);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const file_r6 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵpropertyInterpolate(\"href\", file_r6.url, i0.ɵɵsanitizeUrl);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(file_r6.name);\r\n} }\r\nexport class DocumentAddComponent {\r\n    constructor(http, documentsService, router, route) {\r\n        this.http = http;\r\n        this.documentsService = documentsService;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.statusMessage = \"\";\r\n        this.fileName = \"\";\r\n        // files: FileList | null = null;\r\n        this.uploadSub = new Subscription;\r\n    }\r\n    ngOnInit() {\r\n        this.fileInfos = this.documentsService.getFiles();\r\n    }\r\n    selectFile(event) {\r\n        this.selectedFiles = event.target.files;\r\n    }\r\n    upload() {\r\n        this.uploadProgress = 0;\r\n        if (this.selectedFiles) {\r\n            const file = this.selectedFiles.item(0);\r\n            if (file) {\r\n                this.currentFile = file;\r\n                this.documentsService.uploadFile(this.currentFile).subscribe((event) => {\r\n                    if (event.type === HttpEventType.UploadProgress) {\r\n                        this.uploadProgress = Math.round(100 * event.loaded / event.total);\r\n                    }\r\n                    else if (event instanceof HttpResponse) {\r\n                        this.statusMessage = event.body.message;\r\n                        this.fileInfos = this.documentsService.getFiles();\r\n                    }\r\n                }, (err) => {\r\n                    console.log(err);\r\n                    this.uploadProgress = 0;\r\n                    if (err.error && err.error.message) {\r\n                        this.statusMessage = err.error.message;\r\n                    }\r\n                    else {\r\n                        this.statusMessage = 'Could not upload the file!';\r\n                    }\r\n                    this.currentFile = undefined;\r\n                });\r\n            }\r\n            this.selectedFiles = undefined;\r\n        }\r\n    }\r\n    onCancelUpload() {\r\n        this.uploadSub.unsubscribe();\r\n        this.reset();\r\n    }\r\n    onCancel() {\r\n        this.router.navigate(['../'], { relativeTo: this.route });\r\n    }\r\n    reset() {\r\n        this.uploadProgress = 0;\r\n        this.uploadSub.unsubscribe();\r\n    }\r\n    ngOnDestroy() {\r\n        console.log(\"ARE YOU DESTROYING ME????????????\");\r\n    }\r\n}\r\nDocumentAddComponent.ɵfac = function DocumentAddComponent_Factory(t) { return new (t || DocumentAddComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.DocumentService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute)); };\r\nDocumentAddComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DocumentAddComponent, selectors: [[\"app-document-add\"]], decls: 24, vars: 7, consts: [[1, \"form-group\"], [1, \"col-xs-12\"], [1, \"row\"], [\"type\", \"file\", \"id\", \"file\", \"name\", \"document\", 1, \"form-control\", 2, \"display\", \"none\", 3, \"change\"], [\"uploadDoc\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"row\", 2, \"margin-top\", \"20px\", \"margin-bottom\", \"20px\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", \"progress-bar-striped\", 3, \"ngStyle\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]], template: function DocumentAddComponent_Template(rf, ctx) { if (rf & 1) {\r\n        const _r7 = i0.ɵɵgetCurrentView();\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"div\", 1);\r\n        i0.ɵɵelementStart(4, \"h4\");\r\n        i0.ɵɵtext(5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(6, \"input\", 3, 4);\r\n        i0.ɵɵlistener(\"change\", function DocumentAddComponent_Template_input_change_6_listener($event) { return ctx.selectFile($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"button\", 5);\r\n        i0.ɵɵlistener(\"click\", function DocumentAddComponent_Template_button_click_8_listener() { i0.ɵɵrestoreView(_r7); const _r0 = i0.ɵɵreference(7); return _r0.click(); });\r\n        i0.ɵɵtext(9, \"Select Document\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(10, \"div\", 6);\r\n        i0.ɵɵelementStart(11, \"div\", 1);\r\n        i0.ɵɵtemplate(12, DocumentAddComponent_div_12_Template, 3, 5, \"div\", 7);\r\n        i0.ɵɵtemplate(13, DocumentAddComponent_button_13_Template, 2, 0, \"button\", 8);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(14, \"div\", 2);\r\n        i0.ɵɵelementStart(15, \"button\", 9);\r\n        i0.ɵɵlistener(\"click\", function DocumentAddComponent_Template_button_click_15_listener() { return ctx.upload(); });\r\n        i0.ɵɵtext(16, \"Upload Document\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"button\", 10);\r\n        i0.ɵɵlistener(\"click\", function DocumentAddComponent_Template_button_click_17_listener() { return ctx.onCancel(); });\r\n        i0.ɵɵtext(18, \"Back\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"div\", 11);\r\n        i0.ɵɵelementStart(20, \"div\", 12);\r\n        i0.ɵɵtext(21, \"List of Files\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(22, DocumentAddComponent_ul_22_Template, 4, 2, \"ul\", 13);\r\n        i0.ɵɵpipe(23, \"async\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵtextInterpolate(ctx.statusMessage);\r\n        i0.ɵɵadvance(7);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.currentFile);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.uploadProgress > 0);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\r\n        i0.ɵɵadvance(7);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(23, 5, ctx.fileInfos));\r\n    } }, directives: [i4.NgIf, i4.NgForOf, i4.NgStyle], pipes: [i4.AsyncPipe], styles: [\".file-upload[_ngcontent-%COMP%] {\\r\\n    display:none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3VtZW50LWFkZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtBQUNoQiIsImZpbGUiOiJkb2N1bWVudC1hZGQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5maWxlLXVwbG9hZCB7XHJcbiAgICBkaXNwbGF5Om5vbmU7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}